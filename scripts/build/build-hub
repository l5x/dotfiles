#!/usr/bin/env bash
# @description build github hub
# @import console/info
# @dependency git
# @dependency go

main () {
    strict  true
    verbose true

    # sudo -E apt-get install -y --no-install-suggests --no-install-recommends --force-yes \
    # libncurses5-dev libgnome2-dev libgnomeui-dev \
    # libgtk2.0-dev libatk1.0-dev libbonoboui2-dev \
    # libcairo2-dev libx11-dev libxpm-dev libxt-dev python-dev \
    # ruby-dev git

    if [[ -d "${HOME}/.hub-dist" ]]
    then
        rm -rf "${HOME}/.hub-dist"
    fi 

    mkdir -p "${HOME}/.hub-dist/build"
    mkdir -p "${HOME}/.hub-dist/bin"

    git clone --depth 1 https://github.com/github/hub.git "${HOME}/.hub-dist/build"

    cd "${HOME}/.hub-dist/build" || exit

    ./script/build -o "${HOME}/.hub-dist/bin/hub"

    _ info "Done."
}

onExit () {
    _ info "Removing temporary files and directories."

    if [[ -d "${HOME}/.hub-dist/build" ]]
    then
        rm -rf "${HOME}/.hub-dist/build"
    fi
}
